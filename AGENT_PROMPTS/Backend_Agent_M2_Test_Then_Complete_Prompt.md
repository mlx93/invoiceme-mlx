# Backend Agent M2 - Test First, Then Complete Extended Features

Test the implemented core infrastructure first by running Postman/curl tests on all endpoints to verify: Customer CRUD endpoints work correctly (create, get, list, update, delete with proper RBAC), Invoice CRUD endpoints work correctly (create draft, get, list, update, mark as sent, cancel with proper RBAC), Payment endpoints work correctly (record payment with overpayment â†’ credit logic, get, list with proper RBAC), domain events are firing (verify InvoiceSentEvent, PaymentRecordedEvent, InvoiceFullyPaidEvent are published and listeners are triggered - check email service logs and activity feed table), scheduled jobs execute correctly (test RecurringInvoiceScheduledJob by manually triggering or waiting for scheduled time, test LateFeeScheduledJob similarly), and RBAC enforcement works (test each endpoint with different user roles to verify @PreAuthorize annotations prevent unauthorized access). After core flow is verified working, complete the remaining extended features: Dashboard features (GetMetricsQuery/Handler returning DashboardMetricsResponse with revenue MTD, outstanding invoices count/amount, overdue invoices count/amount, active customers count; GetRevenueTrendQuery/Handler returning monthly revenue data; GetInvoiceStatusQuery/Handler returning status breakdown; GetAgingReportQuery/Handler returning aging buckets 0-30, 31-60, 61-90, 90+ days), and User Approval workflow (ApproveUserCommand/Handler that sets user status to ACTIVE and sends approval email, RejectUserCommand/Handler that sets user status to INACTIVE and sends rejection email, GetPendingUsersQuery/Handler returning list of users with status PENDING). Document test results in a testing report showing endpoint status, RBAC verification, domain event verification, and any issues found.

